(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();const lt = "http://timmoyence-server.eddi.cloud";function qe(){document.querySelectorAll(".modal .close, .modal .modal-background").forEach(t=>{t.addEventListener("click",Xe)})}function Xe(){mt()}function mt(){document.querySelectorAll(".modal").forEach(t=>{t.classList.remove("is-active")})}async function je(){return await(await fetch(`${lt}/lists`)).json()}async function Ye(e){const t=await fetch(`${lt}/lists`,{method:"post",body:JSON.stringify(e),headers:{"Content-type":"application/json; charset=UTF-8"}});return t.ok?await t.json():null}async function Re(e){const t=await fetch(`${lt}/cards`,{method:"post",body:JSON.stringify(e),headers:{"Content-type":"application/json; charset=UTF-8"}});return t.ok?await t.json():null}async function Ee(e,t){const n=await fetch(`${lt}/cards/${e}`,{method:"PATCH",body:JSON.stringify(t),headers:{"Content-type":"application/json; charset=UTF-8"}});return n.ok?await n.json():null}async function He(e){const t=await fetch(`${lt}/cards/${e}`,{method:"DELETE",headers:{"Content-type":"application/json; charset=UTF-8"}});return t.ok?await t.json():null}async function ye(e,t){const n=await fetch(`${lt}/lists/${e}`,{method:"PATCH",body:JSON.stringify(t),headers:{"Content-type":"application/json; charset=UTF-8"}});return n.ok?await n.json():null}async function $e(e){const t=await fetch(`${lt}/lists/${e}`,{method:"DELETE",headers:{"Content-type":"application/json; charset=UTF-8"}});return t.ok?await t.json():null}function We(){document.querySelector("#add-card-modal form").addEventListener("submit",Je)}function Ge(){document.querySelector("#change-card-modal form").addEventListener("submit",Ze)}function Ue(e){document.querySelector(`#list-${e} [slot='add-card-button']`).addEventListener("click",Qe)}function ze(e){document.querySelector(`#card-${e} [slot='edit-card-button']`).addEventListener("click",tn)}function Ve(e){document.querySelector(`#card-${e} [slot='remove-card-button']`).addEventListener("click",Ke)}async function Je(e){e.preventDefault();const t=document.querySelector("#add-card-modal form"),n=new FormData(t),o=Object.fromEntries(n);o.color="#FFFFFF";const i=await Re(o);we(i),i?(t.reset(),mt()):alert("un problème est survenu lors de la création de la carte...")}async function Ke(e){const n=e.currentTarget.closest("[slot=card-id]"),o=n.id,i=Number(o.substring(5));await He(i)?n.remove():alert("Un problème est survenu lors de la suppression de la carte...")}async function Ze(e){e.preventDefault();const t=document.querySelector("#change-card-modal form"),n=new FormData(t),o=Object.fromEntries(n),i=o.card_id;await Ee(i,o)?(on(i,o),t.reset(),mt()):alert("Un problème est survenu lors de la modification de la carte...")}function Qe(e){const o=e.currentTarget.closest("[slot=list-id]").id,i=Number(o.substring(5));en(i)}function tn(e){const o=e.currentTarget.closest("[slot=card-id]").id,i=Number(o.substring(5));nn(i)}function en(e){const t=document.querySelector("#add-card-modal");t.classList.add("is-active");const n=t.querySelector("[name='list_id']");n.value=e}function nn(e){const t=document.querySelector("#change-card-modal");t.classList.add("is-active");const n=t.querySelector("[name='card_id']");n.value=e}function we(e){const t=document.querySelector(`#list-${e.list_id} [slot='list-content']`),r=document.querySelector("#card-template").content.cloneNode(!0).querySelector(".card"),a=r.querySelector("[slot='card-description']");a.textContent=e.description,r.setAttribute("id",`card-${e.id}`),t.append(r),Ve(e.id),ze(e.id),re(t)}function on(e,t){if(t.description){const n=document.querySelector(`#card-${e}  [slot="card-description"]`);n.innerHTML=t.description}}/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,o)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?de(Object(n),!0).forEach(function(o){rn(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Mt(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Mt=function(t){return typeof t}:Mt=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mt(e)}function rn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(){return z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},z.apply(this,arguments)}function an(e,t){if(e==null)return{};var n={},o=Object.keys(e),i,r;for(r=0;r<o.length;r++)i=o[r],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function ln(e,t){if(e==null)return{};var n=an(e,t),o,i;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var sn="1.15.0";function U(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var V=U(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),It=U(/Edge/i),ue=U(/firefox/i),Ct=U(/safari/i)&&!U(/chrome/i)&&!U(/android/i),Se=U(/iP(ad|od|hone)/i),Ce=U(/chrome/i)&&U(/android/i),De={capture:!1,passive:!1};function E(e,t,n){e.addEventListener(t,n,!V&&De)}function b(e,t,n){e.removeEventListener(t,n,!V&&De)}function jt(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function cn(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function R(e,t,n,o){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&jt(e,t):jt(e,t))||o&&e===n)return e;if(e===n)break}while(e=cn(e))}return null}var fe=/\s+/g;function x(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(fe," ").replace(" "+t+" "," ");e.className=(o+(n?" "+t:"")).replace(fe," ")}}function m(e,t,n){var o=e&&e.style;if(o){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in o)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),o[t]=n+(typeof n=="string"?"":"px")}}function ft(e,t){var n="";if(typeof e=="string")n=e;else do{var o=m(e,"transform");o&&o!=="none"&&(n=o+" "+n)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function Te(e,t,n){if(e){var o=e.getElementsByTagName(t),i=0,r=o.length;if(n)for(;i<r;i++)n(o[i],i);return o}return[]}function H(){var e=document.scrollingElement;return e||document.documentElement}function _(e,t,n,o,i){if(!(!e.getBoundingClientRect&&e!==window)){var r,a,s,l,c,f,u;if(e!==window&&e.parentNode&&e!==H()?(r=e.getBoundingClientRect(),a=r.top,s=r.left,l=r.bottom,c=r.right,f=r.height,u=r.width):(a=0,s=0,l=window.innerHeight,c=window.innerWidth,f=window.innerHeight,u=window.innerWidth),(t||n)&&e!==window&&(i=i||e.parentNode,!V))do if(i&&i.getBoundingClientRect&&(m(i,"transform")!=="none"||n&&m(i,"position")!=="static")){var g=i.getBoundingClientRect();a-=g.top+parseInt(m(i,"border-top-width")),s-=g.left+parseInt(m(i,"border-left-width")),l=a+r.height,c=s+r.width;break}while(i=i.parentNode);if(o&&e!==window){var w=ft(i||e),v=w&&w.a,y=w&&w.d;w&&(a/=y,s/=v,u/=v,f/=y,l=a+f,c=s+u)}return{top:a,left:s,bottom:l,right:c,width:u,height:f}}}function he(e,t,n){for(var o=tt(e,!0),i=_(e)[t];o;){var r=_(o)[n],a=void 0;if(n==="top"||n==="left"?a=i>=r:a=i<=r,!a)return o;if(o===H())break;o=tt(o,!1)}return!1}function ht(e,t,n,o){for(var i=0,r=0,a=e.children;r<a.length;){if(a[r].style.display!=="none"&&a[r]!==h.ghost&&(o||a[r]!==h.dragged)&&R(a[r],n.draggable,e,!1)){if(i===t)return a[r];i++}r++}return null}function ae(e,t){for(var n=e.lastElementChild;n&&(n===h.ghost||m(n,"display")==="none"||t&&!jt(n,t));)n=n.previousElementSibling;return n||null}function B(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==h.clone&&(!t||jt(e,t))&&n++;return n}function me(e){var t=0,n=0,o=H();if(e)do{var i=ft(e),r=i.a,a=i.d;t+=e.scrollLeft*r,n+=e.scrollTop*a}while(e!==o&&(e=e.parentNode));return[t,n]}function dn(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var o in t)if(t.hasOwnProperty(o)&&t[o]===e[n][o])return Number(n)}return-1}function tt(e,t){if(!e||!e.getBoundingClientRect)return H();var n=e,o=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=m(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return H();if(o||t)return n;o=!0}}while(n=n.parentNode);return H()}function un(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function Gt(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var Dt;function _e(e,t){return function(){if(!Dt){var n=arguments,o=this;n.length===1?e.call(o,n[0]):e.apply(o,n),Dt=setTimeout(function(){Dt=void 0},t)}}}function fn(){clearTimeout(Dt),Dt=void 0}function Oe(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function Ie(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}var k="Sortable"+new Date().getTime();function hn(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var o=[].slice.call(this.el.children);o.forEach(function(i){if(!(m(i,"display")==="none"||i===h.ghost)){e.push({target:i,rect:_(i)});var r=$({},e[e.length-1].rect);if(i.thisAnimationDuration){var a=ft(i,!0);a&&(r.top-=a.f,r.left-=a.e)}i.fromRect=r}})}},addAnimationState:function(o){e.push(o)},removeAnimationState:function(o){e.splice(dn(e,{target:o}),1)},animateAll:function(o){var i=this;if(!this.options.animation){clearTimeout(t),typeof o=="function"&&o();return}var r=!1,a=0;e.forEach(function(s){var l=0,c=s.target,f=c.fromRect,u=_(c),g=c.prevFromRect,w=c.prevToRect,v=s.rect,y=ft(c,!0);y&&(u.top-=y.f,u.left-=y.e),c.toRect=u,c.thisAnimationDuration&&Gt(g,u)&&!Gt(f,u)&&(v.top-u.top)/(v.left-u.left)===(f.top-u.top)/(f.left-u.left)&&(l=pn(v,g,w,i.options)),Gt(u,f)||(c.prevFromRect=f,c.prevToRect=u,l||(l=i.options.animation),i.animate(c,v,u,l)),l&&(r=!0,a=Math.max(a,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(t),r?t=setTimeout(function(){typeof o=="function"&&o()},a):typeof o=="function"&&o(),e=[]},animate:function(o,i,r,a){if(a){m(o,"transition",""),m(o,"transform","");var s=ft(this.el),l=s&&s.a,c=s&&s.d,f=(i.left-r.left)/(l||1),u=(i.top-r.top)/(c||1);o.animatingX=!!f,o.animatingY=!!u,m(o,"transform","translate3d("+f+"px,"+u+"px,0)"),this.forRepaintDummy=mn(o),m(o,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),m(o,"transform","translate3d(0,0,0)"),typeof o.animated=="number"&&clearTimeout(o.animated),o.animated=setTimeout(function(){m(o,"transition",""),m(o,"transform",""),o.animated=!1,o.animatingX=!1,o.animatingY=!1},a)}}}}function mn(e){return e.offsetWidth}function pn(e,t,n,o){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*o.animation}var st=[],Ut={initializeByDefault:!0},Lt={mount:function(t){for(var n in Ut)Ut.hasOwnProperty(n)&&!(n in t)&&(t[n]=Ut[n]);st.forEach(function(o){if(o.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),st.push(t)},pluginEvent:function(t,n,o){var i=this;this.eventCanceled=!1,o.cancel=function(){i.eventCanceled=!0};var r=t+"Global";st.forEach(function(a){n[a.pluginName]&&(n[a.pluginName][r]&&n[a.pluginName][r]($({sortable:n},o)),n.options[a.pluginName]&&n[a.pluginName][t]&&n[a.pluginName][t]($({sortable:n},o)))})},initializePlugins:function(t,n,o,i){st.forEach(function(s){var l=s.pluginName;if(!(!t.options[l]&&!s.initializeByDefault)){var c=new s(t,n,t.options);c.sortable=t,c.options=t.options,t[l]=c,z(o,c.defaults)}});for(var r in t.options)if(t.options.hasOwnProperty(r)){var a=this.modifyOption(t,r,t.options[r]);typeof a<"u"&&(t.options[r]=a)}},getEventProperties:function(t,n){var o={};return st.forEach(function(i){typeof i.eventProperties=="function"&&z(o,i.eventProperties.call(n[i.pluginName],t))}),o},modifyOption:function(t,n,o){var i;return st.forEach(function(r){t[r.pluginName]&&r.optionListeners&&typeof r.optionListeners[n]=="function"&&(i=r.optionListeners[n].call(t[r.pluginName],o))}),i}};function gn(e){var t=e.sortable,n=e.rootEl,o=e.name,i=e.targetEl,r=e.cloneEl,a=e.toEl,s=e.fromEl,l=e.oldIndex,c=e.newIndex,f=e.oldDraggableIndex,u=e.newDraggableIndex,g=e.originalEvent,w=e.putSortable,v=e.extraEventProperties;if(t=t||n&&n[k],!!t){var y,q=t.options,W="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!V&&!It?y=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(y=document.createEvent("Event"),y.initEvent(o,!0,!0)),y.to=a||n,y.from=s||n,y.item=i||n,y.clone=r,y.oldIndex=l,y.newIndex=c,y.oldDraggableIndex=f,y.newDraggableIndex=u,y.originalEvent=g,y.pullMode=w?w.lastPutMode:void 0;var L=$($({},v),Lt.getEventProperties(o,t));for(var X in L)y[X]=L[X];n&&n.dispatchEvent(y),q[W]&&q[W].call(t,y)}}var vn=["evt"],F=function(t,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=o.evt,r=ln(o,vn);Lt.pluginEvent.bind(h)(t,n,$({dragEl:d,parentEl:D,ghostEl:p,rootEl:S,nextEl:at,lastDownEl:kt,cloneEl:C,cloneHidden:Q,dragStarted:yt,putSortable:O,activeSortable:h.active,originalEvent:i,oldIndex:ut,oldDraggableIndex:Tt,newIndex:M,newDraggableIndex:Z,hideGhostForTarget:Ne,unhideGhostForTarget:Pe,cloneNowHidden:function(){Q=!0},cloneNowShown:function(){Q=!1},dispatchSortableEvent:function(s){A({sortable:n,name:s,originalEvent:i})}},r))};function A(e){gn($({putSortable:O,cloneEl:C,targetEl:d,rootEl:S,oldIndex:ut,oldDraggableIndex:Tt,newIndex:M,newDraggableIndex:Z},e))}var d,D,p,S,at,kt,C,Q,ut,M,Tt,Z,Ft,O,dt=!1,Yt=!1,Rt=[],it,j,zt,Vt,pe,ge,yt,ct,_t,Ot=!1,Nt=!1,Bt,I,Jt=[],ee=!1,Ht=[],Wt=typeof document<"u",Pt=Se,ve=It||V?"cssFloat":"float",bn=Wt&&!Ce&&!Se&&"draggable"in document.createElement("div"),Le=function(){if(Wt){if(V)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),Ae=function(t,n){var o=m(t),i=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),r=ht(t,0,n),a=ht(t,1,n),s=r&&m(r),l=a&&m(a),c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+_(r).width,f=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+_(a).width;if(o.display==="flex")return o.flexDirection==="column"||o.flexDirection==="column-reverse"?"vertical":"horizontal";if(o.display==="grid")return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&s.float&&s.float!=="none"){var u=s.float==="left"?"left":"right";return a&&(l.clear==="both"||l.clear===u)?"vertical":"horizontal"}return r&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||c>=i&&o[ve]==="none"||a&&o[ve]==="none"&&c+f>i)?"vertical":"horizontal"},En=function(t,n,o){var i=o?t.left:t.top,r=o?t.right:t.bottom,a=o?t.width:t.height,s=o?n.left:n.top,l=o?n.right:n.bottom,c=o?n.width:n.height;return i===s||r===l||i+a/2===s+c/2},yn=function(t,n){var o;return Rt.some(function(i){var r=i[k].options.emptyInsertThreshold;if(!(!r||ae(i))){var a=_(i),s=t>=a.left-r&&t<=a.right+r,l=n>=a.top-r&&n<=a.bottom+r;if(s&&l)return o=i}}),o},Fe=function(t){function n(r,a){return function(s,l,c,f){var u=s.options.group.name&&l.options.group.name&&s.options.group.name===l.options.group.name;if(r==null&&(a||u))return!0;if(r==null||r===!1)return!1;if(a&&r==="clone")return r;if(typeof r=="function")return n(r(s,l,c,f),a)(s,l,c,f);var g=(a?s:l).options.group.name;return r===!0||typeof r=="string"&&r===g||r.join&&r.indexOf(g)>-1}}var o={},i=t.group;(!i||Mt(i)!="object")&&(i={name:i}),o.name=i.name,o.checkPull=n(i.pull,!0),o.checkPut=n(i.put),o.revertClone=i.revertClone,t.group=o},Ne=function(){!Le&&p&&m(p,"display","none")},Pe=function(){!Le&&p&&m(p,"display","")};Wt&&!Ce&&document.addEventListener("click",function(e){if(Yt)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Yt=!1,!1},!0);var rt=function(t){if(d){t=t.touches?t.touches[0]:t;var n=yn(t.clientX,t.clientY);if(n){var o={};for(var i in t)t.hasOwnProperty(i)&&(o[i]=t[i]);o.target=o.rootEl=n,o.preventDefault=void 0,o.stopPropagation=void 0,n[k]._onDragOver(o)}}},wn=function(t){d&&d.parentNode[k]._isOutsideThisEl(t.target)};function h(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=z({},t),e[k]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ae(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,s){a.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:h.supportPointer!==!1&&"PointerEvent"in window&&!Ct,emptyInsertThreshold:5};Lt.initializePlugins(this,e,n);for(var o in n)!(o in t)&&(t[o]=n[o]);Fe(t);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=t.forceFallback?!1:bn,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?E(e,"pointerdown",this._onTapStart):(E(e,"mousedown",this._onTapStart),E(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(E(e,"dragover",this),E(e,"dragenter",this)),Rt.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),z(this,hn())}h.prototype={constructor:h,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(ct=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,d):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,o=this.el,i=this.options,r=i.preventOnFilter,a=t.type,s=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,l=(s||t).target,c=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,f=i.filter;if(Ln(o),!d&&!(/mousedown|pointerdown/.test(a)&&t.button!==0||i.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Ct&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=R(l,i.draggable,o,!1),!(l&&l.animated)&&kt!==l)){if(ut=B(l),Tt=B(l,i.draggable),typeof f=="function"){if(f.call(this,t,l,this)){A({sortable:n,rootEl:c,name:"filter",targetEl:l,toEl:o,fromEl:o}),F("filter",n,{evt:t}),r&&t.cancelable&&t.preventDefault();return}}else if(f&&(f=f.split(",").some(function(u){if(u=R(c,u.trim(),o,!1),u)return A({sortable:n,rootEl:u,name:"filter",targetEl:l,fromEl:o,toEl:o}),F("filter",n,{evt:t}),!0}),f)){r&&t.cancelable&&t.preventDefault();return}i.handle&&!R(c,i.handle,o,!1)||this._prepareDragStart(t,s,l)}}},_prepareDragStart:function(t,n,o){var i=this,r=i.el,a=i.options,s=r.ownerDocument,l;if(o&&!d&&o.parentNode===r){var c=_(o);if(S=r,d=o,D=d.parentNode,at=d.nextSibling,kt=o,Ft=a.group,h.dragged=d,it={target:d,clientX:(n||t).clientX,clientY:(n||t).clientY},pe=it.clientX-c.left,ge=it.clientY-c.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,d.style["will-change"]="all",l=function(){if(F("delayEnded",i,{evt:t}),h.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!ue&&i.nativeDraggable&&(d.draggable=!0),i._triggerDragStart(t,n),A({sortable:i,name:"choose",originalEvent:t}),x(d,a.chosenClass,!0)},a.ignore.split(",").forEach(function(f){Te(d,f.trim(),Kt)}),E(s,"dragover",rt),E(s,"mousemove",rt),E(s,"touchmove",rt),E(s,"mouseup",i._onDrop),E(s,"touchend",i._onDrop),E(s,"touchcancel",i._onDrop),ue&&this.nativeDraggable&&(this.options.touchStartThreshold=4,d.draggable=!0),F("delayStart",this,{evt:t}),a.delay&&(!a.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(It||V))){if(h.eventCanceled){this._onDrop();return}E(s,"mouseup",i._disableDelayedDrag),E(s,"touchend",i._disableDelayedDrag),E(s,"touchcancel",i._disableDelayedDrag),E(s,"mousemove",i._delayedDragTouchMoveHandler),E(s,"touchmove",i._delayedDragTouchMoveHandler),a.supportPointer&&E(s,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,a.delay)}else l()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){d&&Kt(d),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;b(t,"mouseup",this._disableDelayedDrag),b(t,"touchend",this._disableDelayedDrag),b(t,"touchcancel",this._disableDelayedDrag),b(t,"mousemove",this._delayedDragTouchMoveHandler),b(t,"touchmove",this._delayedDragTouchMoveHandler),b(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?E(document,"pointermove",this._onTouchMove):n?E(document,"touchmove",this._onTouchMove):E(document,"mousemove",this._onTouchMove):(E(d,"dragend",this),E(S,"dragstart",this._onDragStart));try{document.selection?qt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(dt=!1,S&&d){F("dragStarted",this,{evt:n}),this.nativeDraggable&&E(document,"dragover",wn);var o=this.options;!t&&x(d,o.dragClass,!1),x(d,o.ghostClass,!0),h.active=this,t&&this._appendGhost(),A({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(j){this._lastX=j.clientX,this._lastY=j.clientY,Ne();for(var t=document.elementFromPoint(j.clientX,j.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(j.clientX,j.clientY),t!==n);)n=t;if(d.parentNode[k]._isOutsideThisEl(t),n)do{if(n[k]){var o=void 0;if(o=n[k]._onDragOver({clientX:j.clientX,clientY:j.clientY,target:t,rootEl:n}),o&&!this.options.dragoverBubble)break}t=n}while(n=n.parentNode);Pe()}},_onTouchMove:function(t){if(it){var n=this.options,o=n.fallbackTolerance,i=n.fallbackOffset,r=t.touches?t.touches[0]:t,a=p&&ft(p,!0),s=p&&a&&a.a,l=p&&a&&a.d,c=Pt&&I&&me(I),f=(r.clientX-it.clientX+i.x)/(s||1)+(c?c[0]-Jt[0]:0)/(s||1),u=(r.clientY-it.clientY+i.y)/(l||1)+(c?c[1]-Jt[1]:0)/(l||1);if(!h.active&&!dt){if(o&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<o)return;this._onDragStart(t,!0)}if(p){a?(a.e+=f-(zt||0),a.f+=u-(Vt||0)):a={a:1,b:0,c:0,d:1,e:f,f:u};var g="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");m(p,"webkitTransform",g),m(p,"mozTransform",g),m(p,"msTransform",g),m(p,"transform",g),zt=f,Vt=u,j=r}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!p){var t=this.options.fallbackOnBody?document.body:S,n=_(d,!0,Pt,!0,t),o=this.options;if(Pt){for(I=t;m(I,"position")==="static"&&m(I,"transform")==="none"&&I!==document;)I=I.parentNode;I!==document.body&&I!==document.documentElement?(I===document&&(I=H()),n.top+=I.scrollTop,n.left+=I.scrollLeft):I=H(),Jt=me(I)}p=d.cloneNode(!0),x(p,o.ghostClass,!1),x(p,o.fallbackClass,!0),x(p,o.dragClass,!0),m(p,"transition",""),m(p,"transform",""),m(p,"box-sizing","border-box"),m(p,"margin",0),m(p,"top",n.top),m(p,"left",n.left),m(p,"width",n.width),m(p,"height",n.height),m(p,"opacity","0.8"),m(p,"position",Pt?"absolute":"fixed"),m(p,"zIndex","100000"),m(p,"pointerEvents","none"),h.ghost=p,t.appendChild(p),m(p,"transform-origin",pe/parseInt(p.style.width)*100+"% "+ge/parseInt(p.style.height)*100+"%")}},_onDragStart:function(t,n){var o=this,i=t.dataTransfer,r=o.options;if(F("dragStart",this,{evt:t}),h.eventCanceled){this._onDrop();return}F("setupClone",this),h.eventCanceled||(C=Ie(d),C.removeAttribute("id"),C.draggable=!1,C.style["will-change"]="",this._hideClone(),x(C,this.options.chosenClass,!1),h.clone=C),o.cloneId=qt(function(){F("clone",o),!h.eventCanceled&&(o.options.removeCloneOnHide||S.insertBefore(C,d),o._hideClone(),A({sortable:o,name:"clone"}))}),!n&&x(d,r.dragClass,!0),n?(Yt=!0,o._loopId=setInterval(o._emulateDragOver,50)):(b(document,"mouseup",o._onDrop),b(document,"touchend",o._onDrop),b(document,"touchcancel",o._onDrop),i&&(i.effectAllowed="move",r.setData&&r.setData.call(o,i,d)),E(document,"drop",o),m(d,"transform","translateZ(0)")),dt=!0,o._dragStartId=qt(o._dragStarted.bind(o,n,t)),E(document,"selectstart",o),yt=!0,Ct&&m(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,o=t.target,i,r,a,s=this.options,l=s.group,c=h.active,f=Ft===l,u=s.sort,g=O||c,w,v=this,y=!1;if(ee)return;function q(Et,ke){F(Et,v,$({evt:t,isOwner:f,axis:w?"vertical":"horizontal",revert:a,dragRect:i,targetRect:r,canSort:u,fromSortable:g,target:o,completed:L,onMove:function(ce,Be){return xt(S,n,d,i,ce,_(ce),t,Be)},changed:X},ke))}function W(){q("dragOverAnimationCapture"),v.captureAnimationState(),v!==g&&g.captureAnimationState()}function L(Et){return q("dragOverCompleted",{insertion:Et}),Et&&(f?c._hideClone():c._showClone(v),v!==g&&(x(d,O?O.options.ghostClass:c.options.ghostClass,!1),x(d,s.ghostClass,!0)),O!==v&&v!==h.active?O=v:v===h.active&&O&&(O=null),g===v&&(v._ignoreWhileAnimating=o),v.animateAll(function(){q("dragOverAnimationComplete"),v._ignoreWhileAnimating=null}),v!==g&&(g.animateAll(),g._ignoreWhileAnimating=null)),(o===d&&!d.animated||o===n&&!o.animated)&&(ct=null),!s.dragoverBubble&&!t.rootEl&&o!==document&&(d.parentNode[k]._isOutsideThisEl(t.target),!Et&&rt(t)),!s.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),y=!0}function X(){M=B(d),Z=B(d,s.draggable),A({sortable:v,name:"change",toEl:n,newIndex:M,newDraggableIndex:Z,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),o=R(o,s.draggable,n,!0),q("dragOver"),h.eventCanceled)return y;if(d.contains(t.target)||o.animated&&o.animatingX&&o.animatingY||v._ignoreWhileAnimating===o)return L(!1);if(Yt=!1,c&&!s.disabled&&(f?u||(a=D!==S):O===this||(this.lastPutMode=Ft.checkPull(this,c,d,t))&&l.checkPut(this,c,d,t))){if(w=this._getDirection(t,o)==="vertical",i=_(d),q("dragOverValid"),h.eventCanceled)return y;if(a)return D=S,W(),this._hideClone(),q("revert"),h.eventCanceled||(at?S.insertBefore(d,at):S.appendChild(d)),L(!0);var N=ae(n,s.draggable);if(!N||Tn(t,w,this)&&!N.animated){if(N===d)return L(!1);if(N&&n===t.target&&(o=N),o&&(r=_(o)),xt(S,n,d,i,o,r,t,!!o)!==!1)return W(),N&&N.nextSibling?n.insertBefore(d,N.nextSibling):n.appendChild(d),D=n,X(),L(!0)}else if(N&&Dn(t,w,this)){var et=ht(n,0,s,!0);if(et===d)return L(!1);if(o=et,r=_(o),xt(S,n,d,i,o,r,t,!1)!==!1)return W(),n.insertBefore(d,et),D=n,X(),L(!0)}else if(o.parentNode===n){r=_(o);var Y=0,nt,pt=d.parentNode!==n,P=!En(d.animated&&d.toRect||i,o.animated&&o.toRect||r,w),gt=w?"top":"left",J=he(o,"top","top")||he(d,"top","top"),vt=J?J.scrollTop:void 0;ct!==o&&(nt=r[gt],Ot=!1,Nt=!P&&s.invertSwap||pt),Y=_n(t,o,r,w,P?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Nt,ct===o);var G;if(Y!==0){var ot=B(d);do ot-=Y,G=D.children[ot];while(G&&(m(G,"display")==="none"||G===p))}if(Y===0||G===o)return L(!1);ct=o,_t=Y;var bt=o.nextElementSibling,K=!1;K=Y===1;var At=xt(S,n,d,i,o,r,t,K);if(At!==!1)return(At===1||At===-1)&&(K=At===1),ee=!0,setTimeout(Cn,30),W(),K&&!bt?n.appendChild(d):o.parentNode.insertBefore(d,K?bt:o),J&&Oe(J,0,vt-J.scrollTop),D=d.parentNode,nt!==void 0&&!Nt&&(Bt=Math.abs(nt-_(o)[gt])),X(),L(!0)}if(n.contains(d))return L(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){b(document,"mousemove",this._onTouchMove),b(document,"touchmove",this._onTouchMove),b(document,"pointermove",this._onTouchMove),b(document,"dragover",rt),b(document,"mousemove",rt),b(document,"touchmove",rt)},_offUpEvents:function(){var t=this.el.ownerDocument;b(t,"mouseup",this._onDrop),b(t,"touchend",this._onDrop),b(t,"pointerup",this._onDrop),b(t,"touchcancel",this._onDrop),b(document,"selectstart",this)},_onDrop:function(t){var n=this.el,o=this.options;if(M=B(d),Z=B(d,o.draggable),F("drop",this,{evt:t}),D=d&&d.parentNode,M=B(d),Z=B(d,o.draggable),h.eventCanceled){this._nulling();return}dt=!1,Nt=!1,Ot=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),ne(this.cloneId),ne(this._dragStartId),this.nativeDraggable&&(b(document,"drop",this),b(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ct&&m(document.body,"user-select",""),m(d,"transform",""),t&&(yt&&(t.cancelable&&t.preventDefault(),!o.dropBubble&&t.stopPropagation()),p&&p.parentNode&&p.parentNode.removeChild(p),(S===D||O&&O.lastPutMode!=="clone")&&C&&C.parentNode&&C.parentNode.removeChild(C),d&&(this.nativeDraggable&&b(d,"dragend",this),Kt(d),d.style["will-change"]="",yt&&!dt&&x(d,O?O.options.ghostClass:this.options.ghostClass,!1),x(d,this.options.chosenClass,!1),A({sortable:this,name:"unchoose",toEl:D,newIndex:null,newDraggableIndex:null,originalEvent:t}),S!==D?(M>=0&&(A({rootEl:D,name:"add",toEl:D,fromEl:S,originalEvent:t}),A({sortable:this,name:"remove",toEl:D,originalEvent:t}),A({rootEl:D,name:"sort",toEl:D,fromEl:S,originalEvent:t}),A({sortable:this,name:"sort",toEl:D,originalEvent:t})),O&&O.save()):M!==ut&&M>=0&&(A({sortable:this,name:"update",toEl:D,originalEvent:t}),A({sortable:this,name:"sort",toEl:D,originalEvent:t})),h.active&&((M==null||M===-1)&&(M=ut,Z=Tt),A({sortable:this,name:"end",toEl:D,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){F("nulling",this),S=d=D=p=at=C=kt=Q=it=j=yt=M=Z=ut=Tt=ct=_t=O=Ft=h.dragged=h.ghost=h.clone=h.active=null,Ht.forEach(function(t){t.checked=!0}),Ht.length=zt=Vt=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":d&&(this._onDragOver(t),Sn(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,o=this.el.children,i=0,r=o.length,a=this.options;i<r;i++)n=o[i],R(n,a.draggable,this.el,!1)&&t.push(n.getAttribute(a.dataIdAttr)||In(n));return t},sort:function(t,n){var o={},i=this.el;this.toArray().forEach(function(r,a){var s=i.children[a];R(s,this.options.draggable,i,!1)&&(o[r]=s)},this),n&&this.captureAnimationState(),t.forEach(function(r){o[r]&&(i.removeChild(o[r]),i.appendChild(o[r]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return R(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var o=this.options;if(n===void 0)return o[t];var i=Lt.modifyOption(this,t,n);typeof i<"u"?o[t]=i:o[t]=n,t==="group"&&Fe(o)},destroy:function(){F("destroy",this);var t=this.el;t[k]=null,b(t,"mousedown",this._onTapStart),b(t,"touchstart",this._onTapStart),b(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(b(t,"dragover",this),b(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Rt.splice(Rt.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Q){if(F("hideClone",this),h.eventCanceled)return;m(C,"display","none"),this.options.removeCloneOnHide&&C.parentNode&&C.parentNode.removeChild(C),Q=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Q){if(F("showClone",this),h.eventCanceled)return;d.parentNode==S&&!this.options.group.revertClone?S.insertBefore(C,d):at?S.insertBefore(C,at):S.appendChild(C),this.options.group.revertClone&&this.animate(d,C),m(C,"display",""),Q=!1}}};function Sn(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function xt(e,t,n,o,i,r,a,s){var l,c=e[k],f=c.options.onMove,u;return window.CustomEvent&&!V&&!It?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=t,l.from=e,l.dragged=n,l.draggedRect=o,l.related=i||t,l.relatedRect=r||_(t),l.willInsertAfter=s,l.originalEvent=a,e.dispatchEvent(l),f&&(u=f.call(c,l,a)),u}function Kt(e){e.draggable=!1}function Cn(){ee=!1}function Dn(e,t,n){var o=_(ht(n.el,0,n.options,!0)),i=10;return t?e.clientX<o.left-i||e.clientY<o.top&&e.clientX<o.right:e.clientY<o.top-i||e.clientY<o.bottom&&e.clientX<o.left}function Tn(e,t,n){var o=_(ae(n.el,n.options.draggable)),i=10;return t?e.clientX>o.right+i||e.clientX<=o.right&&e.clientY>o.bottom&&e.clientX>=o.left:e.clientX>o.right&&e.clientY>o.top||e.clientX<=o.right&&e.clientY>o.bottom+i}function _n(e,t,n,o,i,r,a,s){var l=o?e.clientY:e.clientX,c=o?n.height:n.width,f=o?n.top:n.left,u=o?n.bottom:n.right,g=!1;if(!a){if(s&&Bt<c*i){if(!Ot&&(_t===1?l>f+c*r/2:l<u-c*r/2)&&(Ot=!0),Ot)g=!0;else if(_t===1?l<f+Bt:l>u-Bt)return-_t}else if(l>f+c*(1-i)/2&&l<u-c*(1-i)/2)return On(t)}return g=g||a,g&&(l<f+c*r/2||l>u-c*r/2)?l>f+c/2?1:-1:0}function On(e){return B(d)<B(e)?1:-1}function In(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,o=0;n--;)o+=t.charCodeAt(n);return o.toString(36)}function Ln(e){Ht.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var o=t[n];o.checked&&Ht.push(o)}}function qt(e){return setTimeout(e,0)}function ne(e){return clearTimeout(e)}Wt&&E(document,"touchmove",function(e){(h.active||dt)&&e.cancelable&&e.preventDefault()});h.utils={on:E,off:b,css:m,find:Te,is:function(t,n){return!!R(t,n,t,!1)},extend:un,throttle:_e,closest:R,toggleClass:x,clone:Ie,index:B,nextTick:qt,cancelNextTick:ne,detectDirection:Ae,getChild:ht};h.get=function(e){return e[k]};h.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(h.utils=$($({},h.utils),o.utils)),Lt.mount(o)})};h.create=function(e,t){return new h(e,t)};h.version=sn;var T=[],wt,oe,ie=!1,Zt,Qt,$t,St;function An(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var o=n.originalEvent;this.sortable.nativeDraggable?E(document,"dragover",this._handleAutoScroll):this.options.supportPointer?E(document,"pointermove",this._handleFallbackAutoScroll):o.touches?E(document,"touchmove",this._handleFallbackAutoScroll):E(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var o=n.originalEvent;!this.options.dragOverBubble&&!o.rootEl&&this._handleAutoScroll(o)},drop:function(){this.sortable.nativeDraggable?b(document,"dragover",this._handleAutoScroll):(b(document,"pointermove",this._handleFallbackAutoScroll),b(document,"touchmove",this._handleFallbackAutoScroll),b(document,"mousemove",this._handleFallbackAutoScroll)),be(),Xt(),fn()},nulling:function(){$t=oe=wt=ie=St=Zt=Qt=null,T.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,o){var i=this,r=(n.touches?n.touches[0]:n).clientX,a=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(r,a);if($t=n,o||this.options.forceAutoScrollFallback||It||V||Ct){te(n,this.options,s,o);var l=tt(s,!0);ie&&(!St||r!==Zt||a!==Qt)&&(St&&be(),St=setInterval(function(){var c=tt(document.elementFromPoint(r,a),!0);c!==l&&(l=c,Xt()),te(n,i.options,c,o)},10),Zt=r,Qt=a)}else{if(!this.options.bubbleScroll||tt(s,!0)===H()){Xt();return}te(n,this.options,tt(s,!1),!1)}}},z(e,{pluginName:"scroll",initializeByDefault:!0})}function Xt(){T.forEach(function(e){clearInterval(e.pid)}),T=[]}function be(){clearInterval(St)}var te=_e(function(e,t,n,o){if(t.scroll){var i=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,a=t.scrollSensitivity,s=t.scrollSpeed,l=H(),c=!1,f;oe!==n&&(oe=n,Xt(),wt=t.scroll,f=t.scrollFn,wt===!0&&(wt=tt(n,!0)));var u=0,g=wt;do{var w=g,v=_(w),y=v.top,q=v.bottom,W=v.left,L=v.right,X=v.width,N=v.height,et=void 0,Y=void 0,nt=w.scrollWidth,pt=w.scrollHeight,P=m(w),gt=w.scrollLeft,J=w.scrollTop;w===l?(et=X<nt&&(P.overflowX==="auto"||P.overflowX==="scroll"||P.overflowX==="visible"),Y=N<pt&&(P.overflowY==="auto"||P.overflowY==="scroll"||P.overflowY==="visible")):(et=X<nt&&(P.overflowX==="auto"||P.overflowX==="scroll"),Y=N<pt&&(P.overflowY==="auto"||P.overflowY==="scroll"));var vt=et&&(Math.abs(L-i)<=a&&gt+X<nt)-(Math.abs(W-i)<=a&&!!gt),G=Y&&(Math.abs(q-r)<=a&&J+N<pt)-(Math.abs(y-r)<=a&&!!J);if(!T[u])for(var ot=0;ot<=u;ot++)T[ot]||(T[ot]={});(T[u].vx!=vt||T[u].vy!=G||T[u].el!==w)&&(T[u].el=w,T[u].vx=vt,T[u].vy=G,clearInterval(T[u].pid),(vt!=0||G!=0)&&(c=!0,T[u].pid=setInterval((function(){o&&this.layer===0&&h.active._onTouchMove($t);var bt=T[this.layer].vy?T[this.layer].vy*s:0,K=T[this.layer].vx?T[this.layer].vx*s:0;typeof f=="function"&&f.call(h.dragged.parentNode[k],K,bt,e,$t,T[this.layer].el)!=="continue"||Oe(T[this.layer].el,K,bt)}).bind({layer:u}),24))),u++}while(t.bubbleScroll&&g!==l&&(g=tt(g,!1)));ie=c}},30),xe=function(t){var n=t.originalEvent,o=t.putSortable,i=t.dragEl,r=t.activeSortable,a=t.dispatchSortableEvent,s=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(n){var c=o||r;s();var f=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,u=document.elementFromPoint(f.clientX,f.clientY);l(),c&&!c.el.contains(u)&&(a("spill"),this.onSpill({dragEl:i,putSortable:o}))}};function le(){}le.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,o=t.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var i=ht(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),o&&o.animateAll()},drop:xe};z(le,{pluginName:"revertOnSpill"});function se(){}se.prototype={onSpill:function(t){var n=t.dragEl,o=t.putSortable,i=o||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:xe};z(se,{pluginName:"removeOnSpill"});h.mount(new An);h.mount(se,le);function Fn(){document.querySelector("#addlist-button").addEventListener("click",Bn)}function Nn(){document.querySelector("#add-list-modal form").addEventListener("submit",Xn)}function Pn(){document.querySelector("#change-list-modal form").addEventListener("submit",jn)}function xn(e){document.querySelector(`#list-${e.id} [slot='list-name']`).addEventListener("click",qn)}function Mn(e){document.querySelector(`#list-${e} [slot='remove-list-button']`).addEventListener("click",Rn)}function kn(){const e=document.querySelector("#lists-container");h.create(e,{animation:250,onEnd:Yn})}function Bn(){$n()}function qn(e){const t=e.currentTarget,n=document.querySelector("#change-list-modal form .name-input");n.placeholder=t.innerHTML;const o=t.closest(".list"),i=Number(o.id.substring(5));Wn(i)}async function Xn(e){e.preventDefault();const t=document.querySelector("#add-list-modal form"),n=new FormData(t),o=Object.fromEntries(n),i=await Ye(o);i?(Me(i),t.reset(),mt()):alert("Un problème est survenu lors de la création de la liste...")}async function jn(e){e.preventDefault();const t=document.querySelector("#change-list-modal form"),n=new FormData(t),o=Object.fromEntries(n),i=o.list_id;await ye(i,o)?(Gn(i,o),t.reset(),mt()):alert("Un problème est survenu lors de la modification de la liste...")}async function Yn(e){const t=document.querySelectorAll(".list");let n=0;for(const o of t){const r=o.id.substring(5);await ye(r,{position:n}),n++}}async function Rn(e){const n=e.currentTarget.closest("[slot='list-id']"),o=n.id.substring(5);await $e(o)?n.remove():alert("Un problème est survenu lors de la suppression de la liste...")}async function Hn(){(await je()).forEach(t=>{Me(t)})}function $n(){document.querySelector("#add-list-modal").classList.add("is-active")}function Wn(e){const t=document.querySelector("#change-list-modal");t.classList.add("is-active");const n=t.querySelector("[name='list_id']");n.value=e}function Me(e){const o=document.querySelector("#list-template").content.cloneNode(!0),i=o.querySelector("[slot='list-name']");i.textContent=e.name;const r=o.querySelector("[slot='list-id']");r.setAttribute("id",`list-${e.id}`),document.querySelector("#lists-container").append(o),Ue(e.id),xn(e),Mn(e.id),e.cards&&e.cards.forEach(l=>{we(l)});const s=r.querySelector(".message-body");h.create(s,{animation:250,group:"cards",onEnd:l=>{re(l.to),l.from!==l.to&&re(l.from)}})}function Gn(e,t){if(t.name){const n=document.querySelector(`#list-${e} [slot='list-name']`);n.innerHTML=t.name}}async function re(e){const t=e.querySelectorAll(".card"),i=e.closest(".list").id.substring(5);let r=0;for(const a of t){const l=a.id.substring(5);if(!await Ee(l,{position:r,list_id:i})){alert("Un problème est survenu lors du réordonnancement des listes");break}r++}}function Un(){document.querySelector(".title").addEventListener("click",Vn)}function zn(){document.querySelector("#title-modal form").addEventListener("submit",Jn)}function Vn(e){const t=e.target;Kn(t)}function Jn(e){e.preventDefault();const t=document.querySelector("#title-modal form"),n=new FormData(t),o=Object.fromEntries(n);//! Faire l'envoie a la BDD pour le nouveau titre 
Zn(o),t.reset(),mt()}function Kn(e){const t=document.querySelector("#title-modal");t.classList.add("is-active");const n=t.querySelector(".input");n.textContent=e.innerHTML}function Zn(e){const t=document.querySelector(".title");t.textContent=e.description}function Qn(){Fn(),qe(),Nn(),We(),Pn(),Ge(),kn(),Un(),zn()}document.addEventListener("DOMContentLoaded",()=>{Qn(),Hn()});
